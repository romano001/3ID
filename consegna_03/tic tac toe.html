<html>
<header>
  <title>TIC TAC TOE</title>
  <style type="text/css">
   button{
     height:100%;
     width:100%;
   }
   table{
     border-style: solid;
     border-color: green;
     width: 500px;
     height: 500px;
   }
  .giocatoreX{
    background-size: cover;
    background-image: url('x.png');
  }
  .giocatoreO{
    background-size: cover;
    background-image: url('o.png');
  }
  .init{
    background-color: white;
    background-image: url('bianca.png');
  }
  #reset{
    height: 100px;
    width: 500px;
    background-color: green;
  }
  #contenuto{
    margin-top: -550px;
  }
  </style>
  <script>
  let clicked=[0,0,0,0,0,0,0,0,0];
  let risultato="";

  function tris(id){
    let Premuto=document.getElementById(id);
    //va tutto a stringa perche' tutti gli attributi sono delle stringhe
    if(clicked[id-1]!=0){
      if(clicked[id-1]==3) return;
      else{
        alert("CASELLA OCCUPATA");
      return;
    }
    }
    let vittoriaX=false;
    Premuto.className="giocatoreX";
    clicked[id-1]=1;
    //controllo se il giocatore ha vinto
    if(clicked[0]==1 && clicked[1]==1 && clicked[2]==1) {vittoriaX=true; clicked=[3,3,3,3,3,3,3,3,3];}//controllo prima riga
    else if(clicked[3]==1 && clicked[4]==1 && clicked[5]==1) {vittoriaX=true; clicked=[3,3,3,3,3,3,3,3,3];}//controllo seconda riga
    else if(clicked[6]==1 && clicked[7]==1 && clicked[8]==1) {vittoriaX=true; clicked=[3,3,3,3,3,3,3,3,3];}//controllo terza riga
    else if(clicked[0]==1 && clicked[3]==1 && clicked[6]==1) {vittoriaX=true; clicked=[3,3,3,3,3,3,3,3,3];}//controllo colonna a sinistra
    else if(clicked[1]==1 && clicked[4]==1 && clicked[7]==1) {vittoriaX=true; clicked=[3,3,3,3,3,3,3,3,3];}//controllo colonna centrale
    else if(clicked[0]==1 && clicked[4]==1 && clicked[8]==1) {vittoriaX=true; clicked=[3,3,3,3,3,3,3,3,3];}//controllo diagonale che va da sinistra a destra
    else if(clicked[2]==1 && clicked[4]==1 && clicked[6]==1) {vittoriaX=true; clicked=[3,3,3,3,3,3,3,3,3];}//controllo diagonaleche va da destra a sinistra
    if(vittoriaX){
      //in caso positivo rilascia un messaggio
      risultato="Vittoria dell'utente";
      document.getElementById("risultato").innerHTML=risultato;
      return;
    }//if
    let Finita=true;
    for(let j=0;j<9;j++)
    {
      if(clicked[j]==0) Finita=false;
    }
    if(risultato=="" && Finita) {risultato="Pareggio";}
    document.getElementById("risultato").innerHTML=risultato;


    //altrimenti tocca alla macchina
    let i=0;
    while(clicked[i]!=0 && i<9)
    {
      i++;
    }
    clicked[i]=2;
    pos = i+1;
    document.getElementById(""+pos).className="giocatoreO";

    //controllo se l'altro giocatore ha vinto
    let vittoriaO=false;
    if(clicked[0]==2 && clicked[1]==2 && clicked[2]==2) {vittoriaO=true; clicked=[3,3,3,3,3,3,3,3,3];}//controllo prima riga
    else if(clicked[3]==2 && clicked[4]==2 && clicked[5]==2) {vittoriaO=true; clicked=[3,3,3,3,3,3,3,3,3];}//controllo seconda riga
    else if(clicked[6]==2 && clicked[7]==2 && clicked[8]==2) {vittoriaO=true; clicked=[3,3,3,3,3,3,3,3,3];}//controllo terza riga
    else if(clicked[0]==2 && clicked[3]==2 && clicked[6]==2) {vittoriaO=true; clicked=[3,3,3,3,3,3,3,3,3];}//controllo colonna a sinistra
    else if(clicked[1]==2 && clicked[4]==2 && clicked[7]==2) {vittoriaO=true; clicked=[3,3,3,3,3,3,3,3,3];}//controllo colonna centrale
    else if(clicked[0]==2 && clicked[4]==2 && clicked[8]==2) {vittoriaO=true; clicked=[3,3,3,3,3,3,3,3,3];}//controllo diagonale che va da sinistra a destra
    else if(clicked[2]==2 && clicked[4]==2 && clicked[6]==2) {vittoriaO=true; clicked=[3,3,3,3,3,3,3,3,3];}//controllo diagonaleche va da destra a sinistra
    if(vittoriaO){
      //in caso positivo rilascia un messaggio
      risultato="Vittoria del computer";
      document.getElementById("risultato").innerHTML=risultato;
      return;
    }//if
    Finita=true;
    for(let j=0;j<9;j++)
    {
      if(clicked[j]==0) Finita=false;
    }
    if(risultato=="" && Finita) {risultato="Pareggio";}
    document.getElementById("risultato").innerHTML=risultato;
  }//tris


  function NuovaP(){
    clicked=[0,0,0,0,0,0,0,0,0];
    risultato="";
    document.getElementById("risultato").innerHTML=risultato;
    for(let i=0;i<9;i++)
    {
      let pos = i+1;
      document.getElementById(""+pos).className="init";
    }
  }
  </script>

</header>
<body>
  <center>
    <h1>
      <font color="black" size=10 face="verdana">
      TIC TAC TOE
    </font>
  </h1>
  <table border="5">
    <tr><!-- righe da mettere  -->
      <td><!-- colonne da mettere -->
        <button onclick="tris(id)" id="1" class="init"></button>
      </td>
      <td>
        <button onclick="tris(id)" class="init" id="2"></button>
      </td>
      <td>
        <button onclick="tris(id)" class="init" id="3"></button>
      </td>
    </tr>
    <tr>
      <td>
        <button onclick="tris(id)" class="init" id="4"></button>
      </td>
      <td>
        <button onclick="tris(id)" class="init" id="5"></button>
      </td>
      <td>
        <button onclick="tris(id)" class="init" id="6"></button>
      </td>
    </tr>
    <tr>
      <td>
        <button onclick="tris(id)" class="init" id="7"></button>
      </td>
      <td>
        <button onclick="tris(id)" class="init" id="8"></button>
      </td>
      <td>
        <button onclick="tris(id)" class="init" id="9"></button>
      </td>
    </tr>
  </table>
  <br>
  <button id="reset" onclick="NuovaP()"> <font color="white" size=5 face="verdana"> Nuova partita </font></button>
  <br>
</center>
<font color="black" size=5 face="verdana">
<br><br>Note:L'utente controllerà la X, mentre il computer controllerà il O</font>
<div id="contenuto">
<font color="green" size=5 face="verdana">Risultato: </font>
<font color="black" size=5 face="verdana">
<label id="risultato"></label></font>
</div>
</body>
</html>
